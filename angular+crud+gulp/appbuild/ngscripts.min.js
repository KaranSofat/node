angular.module("myApp",["myApp.controllers","myApp.services","ui.router"]).run(function(e,r,t,s,n,u){}).constant("ApiEndpoint",{url:"http://localhost/AngularApp/WebServices/web/app_dev.php/"}).config(function(e,r,t,s){s.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",e.state("users",{url:"/users",templateUrl:"templates/users.html",controller:"UserCtrl"}).state("addUser",{url:"/addUser",templateUrl:"templates/addUser.html",controller:"addUserCtrl"}).state("editUser",{url:"/editUser/:id",templateUrl:"templates/editUser.html",controller:"editUserCtrl"}),r.otherwise("/users"),t.html5Mode(!0)}),angular.module("myApp.controllers",[]).controller("UserCtrl",function(e,r,t,s){s.Users().then(function(r){e.users=r.users}),e.addUser=function(){r.go("addUser")},e.deleteUser=function(r){s.deleteUser(r).then(function(r){"delete Succesfully"==r.data&&s.Users().then(function(r){e.users=r.users})})}}).controller("addUserCtrl",function(e,r,t,s){e.user={},e.saveInfo=function(){s.addUser(e.user).then(function(e){r.go("users")})},e.cancel=function(){r.go("users")}}).controller("editUserCtrl",function(e,r,t,s,n){e.user={};var u=t.id;n.editUser(u).then(function(r){e.user.name=r.users.first_name,e.user.lastname=r.users.last_name,e.user.email=r.users.email,e.user.company=r.users.company,e.user.designation=r.users.designation}),e.updateInfo=function(){e.user.id=t.id,n.updateInfo(e.user).then(function(e){"update Succesfully"==e.data&&r.go("users")})},e.cancel=function(){r.go("users")}}),angular.module("myApp.services",[]).factory("CrudApp",function(e,r,t){var s=t.url;return{Users:function(){var t=s+"users",n=r.defer();return e.get(t).success(function(e,r,t,s){n.resolve(e)}).error(function(e,r,t,s){n.reject()}),n.promise},addUser:function(t){var n=s+"addUser",u=r.defer();return e.post(n,t).success(function(e,r,t,s){u.resolve(e)}).error(function(e,r,t,s){u.reject()}),u.promise},editUser:function(t){var n=s+"editUser?id="+t,u=r.defer();return e.get(n).success(function(e,r,t,s){u.resolve(e)}).error(function(e,r,t,s){u.reject()}),u.promise},updateInfo:function(t){var n=s+"updateInfo",u=r.defer();return e.post(n,t).success(function(e,r,t,s){u.resolve(e)}).error(function(e,r,t,s){u.reject()}),u.promise},deleteUser:function(t){var n=s+"deleteUser?id="+t,u=r.defer();return e.get(n).success(function(e,r,t,s){u.resolve(e)}).error(function(e,r,t,s){u.reject()}),u.promise}}});